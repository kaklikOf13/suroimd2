import { Definitions,Definition } from "../engine/mod.ts";
import { BulletDef } from "./utils.ts";
export enum FireMode{
    Auto,
    Single
}
export interface GunDef extends Definition{
    bullet:BulletDef
    fireDelay:number
    bulletsCount?:number
    spread?:number
    lenght:number
    jitterRadius?:number
    fireMode?:FireMode
    speedMult?:number
    cap:number
    recoil?:{
        duration:number
        speed:number
    }
}

const tracers={
    redTiny:{
        width:1,
        height:0.4, // 1H = 0.05 radius
    }
}

export const Guns=new Definitions<GunDef>()
Guns.insert(
    {
        idString:"ak47",
        fireDelay:0.1,
        spread:5,
        lenght:0.8,
        cap:4,
        bullet:{
            damage:9,
            radius:0.02,
            range:150,
            speed:0.4,
            tracer:{
                width:1,
                height:0.4,
            }
        },
        recoil:{
            duration:0.1,
            speed:0.7
        },
        speedMult:0.96,
    },
    {
        idString:"kar98k",
        fireDelay:1.2,
        spread:1,
        lenght:0.8,
        cap:4.5,
        bullet:{
            damage:55,
            radius:0.02,
            range:220,
            speed:0.5,
            tracer:{
                width:1,
                height:0.4,
            }
        },
        recoil:{
            duration:1.2,
            speed:0.2
        },
        speedMult:0.9,
    },
    {
        idString:"m870",
        fireDelay:1.2,
        spread:3,
        lenght:0.8,
        bulletsCount:10,
        jitterRadius:0.3,
        cap:4.3,
        fireMode:FireMode.Single,
        bullet:{
            damage:7,
            radius:0.2,
            speed:0.3,
            range:20,
            tracer:tracers.redTiny
        },
        recoil:{
            duration:1.5,
            speed:0.4
        },
        speedMult:0.94,
    },
    {
        idString:"spas12",
        fireDelay:0.9,
        spread:4,
        lenght:0.8,
        bulletsCount:10,
        jitterRadius:0.05,
        cap:4.5,
        fireMode:FireMode.Single,
        bullet:{
            damage:6,
            radius:0.0125,
            speed:0.4,
            range:75,
            tracer:tracers.redTiny
        },
        recoil:{
            duration:1.2,
            speed:0.5
        },
        speedMult:0.95,
    },
)